# Email Service Setup Guide

This guide explains how to set up the email functionality for Task Breakdown Expert using Resend.

## Prerequisites

1. **Resend Account**: Sign up at [resend.com](https://resend.com)
2. **Domain Verification** (for production): Add and verify your domain in Resend dashboard

## Setup Steps

### 1. Get Your Resend API Key

1. Log in to your Resend dashboard
2. Go to "API Keys" section
3. Create a new API key
4. Copy the API key (starts with `re_`)

### 2. Configure Environment Variables

Update your `.env` file with your Resend API key:

```bash
# Email service configuration (Resend)
RESEND_API_KEY=re_your_actual_api_key_here
```

### 3. Update Email From Address (Production)

For production use, you'll need to:

1. **Verify your domain** in the Resend dashboard
2. **Update the from address** in `/src/app/api/send-email/route.ts`:

```typescript
from: 'Task Breakdown Expert <noreply@yourdomain.com>', // Replace with your verified domain
```

## Development Testing

For development/testing purposes, you can use the default Resend testing domain:
- The current setup uses `onboarding@resend.dev` which works for testing
- Emails will be sent successfully but may land in spam folders

## How It Works

1. **User enters email** in the Email Export form
2. **Frontend calls** `/api/send-email` with the task breakdown data
3. **Backend generates** a beautiful HTML email template
4. **Resend sends** the email with the complete learning plan
5. **User receives** a professionally formatted email with their weekly breakdown

## Email Template Features

The generated email includes:
- **Personalized subject line** with the learning goal
- **Plan summary** (if generated by AI)
- **Weekly breakdown** with all tasks organized by week
- **Professional styling** with clear formatting
- **Responsive design** that works on all devices

## Error Handling

The system handles various scenarios:
- **Invalid email addresses** are caught by Zod validation
- **API failures** show user-friendly error messages
- **Missing data** is handled gracefully
- **All attempts are logged** for debugging

## Rate Limits

Resend free tier includes:
- **3,000 emails/month** for free
- **100 emails/day** limit
- For higher volumes, upgrade to a paid plan

## Troubleshooting

### Common Issues:

1. **"Failed to send email"**
   - Check your API key is correct in `.env`
   - Verify the API key has sending permissions
   - Check Resend dashboard for error details

2. **Emails not received**
   - Check spam/junk folders
   - Verify email address is correct
   - For production: ensure domain is verified

3. **API errors in development**
   - Restart your development server after adding API key
   - Check console logs for detailed error messages

### Testing the Email Function

You can test the email functionality by:
1. Generating a task breakdown
2. Entering your email address
3. Clicking "Send Learning Plan to Email"
4. Checking your inbox (and spam folder)

## Security Notes

- **Never commit** your actual API key to version control
- **Use environment variables** for all sensitive configuration
- **Validate all inputs** before sending emails (already implemented)
- **Log email attempts** for monitoring and debugging
